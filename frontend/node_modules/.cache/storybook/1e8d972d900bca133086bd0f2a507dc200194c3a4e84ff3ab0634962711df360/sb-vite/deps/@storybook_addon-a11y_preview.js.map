{"version":3,"file":"@storybook_addon-a11y_preview.js","names":["global","addons","ElementA11yParameterError"],"sources":["../../../../../@storybook/addon-a11y/dist/preview.mjs"],"sourcesContent":["import { expect } from 'storybook/test';\nimport { ElementA11yParameterError } from 'storybook/internal/preview-errors';\nimport { global } from '@storybook/global';\nimport { addons, waitForAnimations } from 'storybook/preview-api';\n\nvar ADDON_ID=\"storybook/a11y\",PANEL_ID=`${ADDON_ID}/panel`;var RESULT=`${ADDON_ID}/result`,REQUEST=`${ADDON_ID}/request`,RUNNING=`${ADDON_ID}/running`,ERROR=`${ADDON_ID}/error`,MANUAL=`${ADDON_ID}/manual`,SELECT=`${ADDON_ID}/select`;var EVENTS={RESULT,REQUEST,RUNNING,ERROR,MANUAL,SELECT};var{document}=global,withLinkPaths=(results,storyId)=>{let pathname=document.location.pathname.replace(/iframe\\.html$/,\"\"),enhancedResults={...results};return [\"incomplete\",\"passes\",\"violations\"].forEach(key=>{Array.isArray(results[key])&&(enhancedResults[key]=results[key].map(result=>({...result,nodes:result.nodes.map((node,index)=>{let id=`${key}.${result.id}.${index+1}`,linkPath=`${pathname}?path=/story/${storyId}&addonPanel=${PANEL_ID}&a11ySelection=${id}`;return {id,...node,linkPath}})})));}),enhancedResults};var{document:document2}=global,channel=addons.getChannel(),DEFAULT_PARAMETERS={config:{},options:{}},DISABLED_RULES=[\"region\"],queue=[],isRunning=!1,runNext=async()=>{if(queue.length===0){isRunning=!1;return}isRunning=!0;let next=queue.shift();next&&await next(),runNext();},run=async(input=DEFAULT_PARAMETERS,storyId)=>{let axe=(await import('axe-core'))?.default||globalThis.axe,{config={},options={}}=input;if(input.element)throw new ElementA11yParameterError;let context={include:document2?.body,exclude:[\".sb-wrapper\",\"#storybook-docs\",\"#storybook-highlights-root\"]};if(input.context){let hasInclude=typeof input.context==\"object\"&&\"include\"in input.context&&input.context.include!==void 0,hasExclude=typeof input.context==\"object\"&&\"exclude\"in input.context&&input.context.exclude!==void 0;hasInclude?context.include=input.context.include:!hasInclude&&!hasExclude&&(context.include=input.context),hasExclude&&(context.exclude=context.exclude.concat(input.context.exclude));}axe.reset();let configWithDefault={...config,rules:[...DISABLED_RULES.map(id=>({id,enabled:!1})),...config?.rules??[]]};return axe.configure(configWithDefault),new Promise((resolve,reject)=>{let highlightsRoot=document2?.getElementById(\"storybook-highlights-root\");highlightsRoot&&(highlightsRoot.style.display=\"none\");let task=async()=>{try{let result=await axe.run(context,options),resultWithLinks=withLinkPaths(result,storyId);resolve(resultWithLinks);}catch(error){reject(error);}};queue.push(task),isRunning||runNext(),highlightsRoot&&(highlightsRoot.style.display=\"\");})};channel.on(EVENTS.MANUAL,async(storyId,input=DEFAULT_PARAMETERS)=>{try{await waitForAnimations();let result=await run(input,storyId),resultJson=JSON.parse(JSON.stringify(result));channel.emit(EVENTS.RESULT,resultJson,storyId);}catch(error){channel.emit(EVENTS.ERROR,error);}});function getIsVitestStandaloneRun(){try{return import.meta.env.VITEST_STORYBOOK===\"false\"}catch{return !1}}var vitestMatchersExtended=!1,afterEach=async({id:storyId,reporting,parameters:parameters2,globals,viewMode})=>{let a11yParameter=parameters2.a11y,a11yGlobals=globals.a11y,shouldRunEnvironmentIndependent=a11yParameter?.disable!==!0&&a11yParameter?.test!==\"off\"&&a11yGlobals?.manual!==!0,getMode=()=>{switch(a11yParameter?.test){case\"todo\":return \"warning\";case\"error\":default:return \"failed\"}};if(shouldRunEnvironmentIndependent&&viewMode===\"story\")try{let result=await run(a11yParameter,storyId);if(result){let hasViolations=(result?.violations.length??0)>0;if(reporting.addReport({type:\"a11y\",version:1,result,status:hasViolations?getMode():\"passed\"}),getIsVitestStandaloneRun()&&hasViolations&&getMode()===\"failed\"){if(!vitestMatchersExtended){let{toHaveNoViolations}=await import('./matchers-7Z3WT2CE.mjs');expect.extend({toHaveNoViolations}),vitestMatchersExtended=!0;}expect(result).toHaveNoViolations();}}}catch(e){if(reporting.addReport({type:\"a11y\",version:1,result:{error:e},status:\"failed\"}),getIsVitestStandaloneRun())throw e}},initialGlobals={a11y:{manual:!1}},parameters={a11y:{test:\"todo\"}};\n\nexport { afterEach, initialGlobals, parameters };\n"],"mappings":"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"}